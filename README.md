p2p-chat
=====
## Реализация p2p-чата с использованием шифрования для передачи сообщений

#### Дисциплина: "Функциональное программирование"
#### Выполнил: Студент Зиновичев Е.С., группа P34112

### Описание работы приложения:

Данная реализация включает в себя несколько сущностей:
  - Discover Server - хранит список подключенных пиров к сети, обычно новый пир обращается к нему для получения дерева подключенных пиров у случайного уже существующего пира в сети. Если Discover Server по какой-то причине недоступен, то пир может подключиться к сети в том случае, если он ранее уже был участником сети.
  - Peer - содержит в себе две сущности - Client и Server. Server хранит в себе информацию о подключенных пирах, публичных ключах для передачи сообщений с использованием шифрования. Client осуществляет обработку и передачу сообщений, обмен ключами шифрования, поиск пиров в существующей сети.

#### Краткое описание алгоритма построения дерева узлов:  
Каждый пир имеет ID. В начале своей работы пир подключается к другому узлу для получения его дерева узлов. Используя ее, он выполняет поиск наиболее близких узлов к нему и заполняет свое дерево узлов. 

![Image alt](https://github.com/scarletshroud/p2p-chat/blob/main/img/routing.png)

#### Краткое описание алгоритма поиска необходимого узла в сети:  
Для поиска конкретного узла пир начинает поиск со своего дерева узлов, стараясь найти наиболее близкий узел к искомому. Далее он обращается к дереву узлов следующего узла, где также выполняется поиск наиболее близкого узла к искомому. Этот процесс выполняется до тех пор, пока мы не достигнем искомого результата либо не исчерпаем лимит hops. 

#### Краткое описание алгоритма посылки сообщений:   
Пир, с которого посылается сообщение, рассылает его всем, кто находится в его дереве узлов. Далее узлы, получившие сообщение, также проходятся по своему дереву узлов и посылают сообщения к узлам, еще не принявшим сообщение.  
![Image alt](https://github.com/scarletshroud/p2p-chat/blob/main/img/sending.png)

#### Шифрование
В данной лабораторной работе реализовано ассиметричное шифрование, с использованием алгоритма RSA.  
Мы имеем два ключа - PublicKey и PrivateKey. Пиры обмениваются публичными ключами между собой, расшифровка сообщений осуществляется с помощью приватных ключей на каждом пире. 

### Sequence Diagrams 
#### Подключение к сети
![Image alt](https://github.com/scarletshroud/p2p-chat/blob/main/img/connection.png)

#### Клиент-серверное взаимодействие внутри одного пира
![Image alt](https://github.com/scarletshroud/p2p-chat/blob/main/img/client_server_interaction.png)

#### Взаимодействие пиров
![Image alt](https://github.com/scarletshroud/p2p-chat/blob/main/img/peers_interaction.png)

### Демонстрация работы приложения на разных узлах:
![Image alt](https://github.com/scarletshroud/p2p-chat/blob/main/img/nodes.png)
1. Запускаем Discovery Server на узле discovery для обслуживания входящих подключений.
2. На каждом клиентском узле выполняем подключение к сети.
3. После того как все клиенты подключились, осуществляем обмен сообщениями.
